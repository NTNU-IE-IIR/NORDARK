#pragma kernel CSMain

RWTexture2D<float4> Texture;
float LuminanceResolution;
RWStructuredBuffer<int> Result;

[numthreads(32,32,1)]
void CSMain (uint3 id : SV_DispatchThreadID)
{
    InterlockedAdd(Result[0], LuminanceResolution * (
        round(Texture[id.xy].r * 100.) * 100 +
        round(Texture[id.xy].g * 100.) * 1 +
        round(Texture[id.xy].b * 100.) * .01
    ));
}